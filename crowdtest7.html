<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>å®šä½èˆ‡èªéŸ³æç¤º</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family: sans-serif; padding: 20px; }
#status { color: green; font-weight: bold; }
</style>
</head>
<body>
<h2>ğŸ” å®šä½æŸ¥è©¢ç¯„ä¾‹</h2>
<p id="status">æ­£åœ¨å˜—è©¦å–å¾—æ‚¨çš„ä½ç½®...</p>

<script>
const fallbackLocation = { lat: 22.3364, lon: 114.1488 }; // è”æè§’

function speak(text) {
const utterance = new SpeechSynthesisUtterance(text);
utterance.lang = 'zh-HK';
speechSynthesis.speak(utterance);
}

function updateStatus(text, color = 'green') {
const status = document.getElementById('status');
status.textContent = text;
status.style.color = color;
}

function onSuccess(position) {
const lat = position.coords.latitude;
const lon = position.coords.longitude;
updateStatus(`âœ… å·²å–å¾—ä½ç½®ï¼š${lat.toFixed(5)}, ${lon.toFixed(5)}`);
// é€™è£¡å¯åŠ è¼‰åœ°åœ–æˆ–æŸ¥è©¢å¤©æ°£ï¼é›¨é‡ç­‰åŠŸèƒ½
}

function onError(error) {
updateStatus("âŒ æœªèƒ½å–å¾—å®šä½ï¼Œä½¿ç”¨é è¨­åœ°é»ï¼ˆè”æè§’ï¼‰", 'red');
speak("è«‹å…è¨±å®šä½æ¬Šé™ã€‚ç¾æ™‚ä½¿ç”¨é è¨­åœ°é»ã€‚");

// ä½¿ç”¨ fallbackï¼ˆä¾‹å¦‚æŸ¥è©¢è”æè§’é›¨é‡ï¼‰
const lat = fallbackLocation.lat;
const lon = fallbackLocation.lon;
console.log("Fallback ä½ç½®ï¼š", lat, lon);
}

// è‡ªå‹•è«‹æ±‚å®šä½
if ("geolocation" in navigator) {
navigator.geolocation.getCurrentPosition(onSuccess, onError, {
enableHighAccuracy: true,
timeout: 5000
});
} else {
updateStatus("âŒ æ­¤ç€è¦½å™¨ä¸æ”¯æ´å®šä½åŠŸèƒ½", 'red');
speak("æ‚¨çš„è£ç½®ä¸æ”¯æ´å®šä½åŠŸèƒ½");
}
</script>
</body>
</html>