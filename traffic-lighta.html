<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<title>å¯¦æ™‚ç´…ç¶ ç‡ˆç›£æ¸¬</title>
<style>
body { font-family: sans-serif; text-align: center; padding: 20px; }
#map { width: 100%; height: 50vh; }
#status { font-size: 24px; margin: 20px; }
#countdown { font-size: 48px; color: green; }
</style>
</head>
<body>
<h1>è”æè§’é“ & é•·è”è¡— ç´…ç¶ ç‡ˆå¯¦æ™‚ç‹€æ…‹</h1>
<div id="map"></div>
<div id="status">ğŸ”„ è¼‰å…¥ä¸­â‹¯â‹¯</div>
<div id="countdown">--</div>

<script src="https://crosslight-proxy.example.com/gmap-loader.js"></script>

<script>
async function updateLight() {
try {
const res = await fetch('https://crosslight-proxy.example.com/traffic-light/now?junction=lcj-lsg');
const data = await res.json();
const s = document.getElementById('status');
const c = document.getElementById('countdown');

if (data.phase === 'green') {
s.innerText = 'ğŸŸ¢ è¡Œäººç¶ ç‡ˆ';
c.innerText = data.remain + 'ç§’';
c.style.color = 'green';
} else if (data.phase === 'flashing') {
s.innerText = 'ğŸŸ¢ è¡Œäººç¶ ç‡ˆï¼ˆé–ƒçˆï¼‰';
c.innerText = data.remain + 'ç§’';
c.style.color = 'orange';
} else {
s.innerText = 'ğŸ”´ è¡Œäººç´…ç‡ˆ';
c.innerText = '--';
c.style.color = 'red';
}
if (data.voice) {
const msg = new SpeechSynthesisUtterance(data.voice);
msg.lang = 'zh-HK';
window.speechSynthesis.cancel();
window.speechSynthesis.speak(msg);
}
} catch (e) {
document.getElementById('status').innerText = 'âš ï¸ ç„¡æ³•å–å¾—è³‡æ–™';
document.getElementById('countdown').innerText = '--';
}
}

updateLight();
setInterval(updateLight, 5000);
</script>
</body>
</html>