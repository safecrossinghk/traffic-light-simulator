<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>Outscraper å³æ™‚äººæµè³‡æ–™æ¸¬è©¦</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; }
.status { font-size: 1.2em; margin-top: 10px; color: #333; }
.warning { color: #cc0000; font-weight: bold; }
</style>
</head>
<body>
<h1>Outscraper å³æ™‚äººæµè³‡æ–™æ¸¬è©¦</h1>
<button onclick="fetchPopularity()">ç«‹å³æŸ¥è©¢æœ—è±ªåŠäººæµ</button>
<div class="status" id="status">å°šæœªæŸ¥è©¢</div>

<script>
const apiKey = 'MWE3NWNmMzFjZWNiNGMxMDlhNGNhNDFjNTY3ZjZkMTB8NzY5ZGY0MGQ0Zg';
const query = 'æœ—è±ªåŠ';
const lat = 22.3193;
const lon = 114.1694;

async function fetchPopularity() {
document.getElementById('status').innerText = 'ğŸ”„ æ­£åœ¨æŸ¥è©¢äººæµè³‡æ–™...';
try {
const response = await fetch('https://api.app.outscraper.com/maps/search-v2', {
method: 'POST',
headers: {
'Content-Type': 'application/json',
'X-API-KEY': apiKey
},
body: JSON.stringify({
query,
limit: 1,
lat,
lon,
language: "zh-HK"
})
});

const data = await response.json();

if (!data.data || data.data.length === 0) {
document.getElementById('status').innerHTML = 'âš ï¸ <span class="warning">æ‰¾ä¸åˆ°åœ°é»è³‡æ–™</span>';
return;
}

const place = data.data[0];
const popularity = place.current_popularity;

if (popularity !== undefined) {
document.getElementById('status').innerText = `ğŸ“ åœ°é»ï¼š${place.name}\nğŸ‘¥ å³æ™‚äººæµï¼š${popularity}/100`;
} else {
document.getElementById('status').innerHTML = `ğŸ“ åœ°é»ï¼š${place.name}<br>âš ï¸ <span class="warning">åƒ…æä¾›æ­·å²äººæµè³‡æ–™</span>`;
}
} catch (error) {
console.error(error);
document.getElementById('status').innerHTML = 'âŒ æŸ¥è©¢éŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚';
}
}

// æ¯ 5 åˆ†é˜è‡ªå‹•æŸ¥è©¢
setInterval(fetchPopularity, 5 * 60 * 1000);
</script>
</body>
</html>