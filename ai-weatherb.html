<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>AIé¢¨æš´æ¶ˆæ¯</title>
<style>
body {
font-family: "Noto Sans TC", sans-serif;
background: #eef3f8;
color: #222;
padding: 1em;
line-height: 1.6;
}
h1 {
text-align: center;
color: #005d9e;
}
.section {
background: #fff;
margin: 1em auto;
padding: 1em;
border-radius: 10px;
max-width: 800px;
box-shadow: 0 0 10px rgba(0,0,0,0.05);
}
.warn {
background: #ffe8aa;
padding: 0.5em;
font-weight: bold;
color: #a00;
border-left: 5px solid #a00;
}
.map {
height: 400px;
margin: 1em 0;
}
.activity-input {
margin-top: 1em;
}
.result {
font-weight: bold;
color: #b00;
}
button {
margin-top: 1em;
}
</style>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
</head>
<body>

<h1>ğŸŒ€ AIé¢¨æš´æ¶ˆæ¯</h1>
<div class="section" id="date">ç‰ˆæœ¬ï¼š2025-07-17 ä¸Šåˆ 9:00</div>

<div class="section" id="warning">
<div class="warn" id="hkoWarning">âš ï¸ æ­£åœ¨è¼‰å…¥å¤©æ–‡å°è­¦å‘Š...</div>
</div>

<div class="section" id="forecast">
<h2>ğŸŒ¬ï¸ AI é æ¸¬è·¯å¾‘åœ–</h2>
<div id="map" class="map"></div>
<p>æœ¬åœ–é¡¯ç¤ºç”± <strong>GLO-TCTrackX</strong> æ¨¡å‹é æ¸¬çš„é¢¨æš´ç§»å‹•è·¯å¾‘ï¼ˆæœ€æ–°é æ¸¬ï¼‰ã€‚</p>
</div>

<div class="section" id="windSignal">
<h2>ğŸ“Š é¢¨çƒæ‡¸æ›æ©Ÿç‡</h2>
<ul id="windProbList"></ul>
</div>

<div class="section" id="impact">
<h2>ğŸ“… ä¸‰æ—¥å…§å½±éŸ¿æ™‚æ®µé æ¸¬</h2>
<ul id="impactInfo">
<li>æœ€æ¥è¿‘é¦™æ¸¯æ™‚é–“ï¼šè¼‰å…¥ä¸­...</li>
<li>æœ€å¯èƒ½æ‡¸æ›å…«è™Ÿä¿¡è™Ÿæ—¥å­ï¼šè¼‰å…¥ä¸­...</li>
<li>å°æˆ¶å¤–æ´»å‹•èˆ‡èˆªç­å½±éŸ¿ï¼šè¼‰å…¥ä¸­...</li>
</ul>
</div>

<div class="section" id="activity">
<h2>ğŸƒğŸ»â€â™€ï¸ æ´»å‹•å»ºè­°åŠ©æ‰‹</h2>
<p>è«‹è¼¸å…¥ä½ çš„æ´»å‹•æ™‚é–“èˆ‡åœ°é»ï¼ˆä¾‹å¦‚ã€Œ7æœˆ18æ—¥ä¸‹åˆè¡Œå±±ã€ï¼‰ï¼š</p>
<input id="activityInput" class="activity-input" type="text" placeholder="7æœˆ18æ—¥æ—©ä¸Šä¹˜èˆ¹"/>
<button onclick="suggestActivity()">æŸ¥è©¢å»ºè­°</button>
<p id="activityResult" class="result"></p>
</div>

<div class="section" id="tide">
<h2>ğŸŒŠ é¢¨æš´æ½®é æ¸¬åœ–</h2>
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/28/Storm_surge_example.svg/640px-Storm_surge_example.svg.png" width="100%" alt="ç¤ºæ„åœ–">
<p>å¦‚éœ€æ¥å…¥å¯¦æ™‚é¢¨æš´æ½®è³‡æ–™ï¼ˆNOAAæˆ–å¤©æ–‡å°ï¼‰ï¼Œå¯ç¨å¾Œæ•´åˆã€‚</p>
</div>

<div class="section" id="voice">
<h2>ğŸ”Š èªéŸ³æç¤º</h2>
<button onclick="speak('zh')">ğŸ“¢ ç²µèªæ’­æ”¾</button>
<button onclick="speak('en')">ğŸ“¢ è‹±èªæ’­æ”¾</button>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
const aiData = {
// âš ï¸ æ¯æ—¥æ—©ä¸Šè«‹å°‡æœ€æ–° aiData JSON è²¼å…¥æ­¤å€è¦†è“‹
path: [],
hkWindBallProb: [5, 35, 60],
impact: {
closestTime: "é€±äº”æ·±å¤œ",
strongSignalDay: "é€±å…­ä¸Šåˆ",
suggestion: "é¢¨å‹¢å°‡è½‰å¼·ï¼Œå»ºè­°é¿å…æµ·ä¸Šæˆ–é«˜åœ°æ´»å‹•"
},
voiceText: {
zh: "æ ¹æ“šæœ€æ–°AIé æ¸¬ï¼Œç†±å¸¶æ°£æ—‹å°‡æ–¼é€±äº”æ·±å¤œæœ€æ¥è¿‘é¦™æ¸¯ï¼Œå…«è™Ÿé¢¨çƒæ©Ÿç‡ç‚ºå…­æˆã€‚",
en: "Based on AI forecast, the tropical cyclone will approach Hong Kong late Friday with 60% chance of Signal No.8."
}
};

const map = L.map('map').setView([22.3, 114.2], 6);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

// è·¯å¾‘ç·šç¹ªè£½
if (aiData.path && aiData.path.length > 1) {
const latlngs = aiData.path.map(p => [p.lat, p.lng]);
L.polyline(latlngs, {color: 'red'}).addTo(map);
L.marker(latlngs[latlngs.length - 1]).addTo(map)
.bindPopup("æœ€æ–°ä½ç½®").openPopup();
}

// æ‡¸æ›æ©Ÿç‡é¡¯ç¤º
const windList = document.getElementById("windProbList");
["ä¸€è™Ÿ", "ä¸‰è™Ÿ", "å…«è™Ÿ"].forEach((label, i) => {
const li = document.createElement("li");
li.textContent = `${label}é¢¨çƒæ©Ÿç‡ï¼š${aiData.hkWindBallProb[i]}%`;
windList.appendChild(li);
});

// å½±éŸ¿æ™‚æ®µæ–‡å­—
const impact = aiData.impact || {};
document.getElementById("impactInfo").innerHTML = `
<li>æœ€æ¥è¿‘é¦™æ¸¯æ™‚é–“ï¼š${impact.closestTime}</li>
<li>æœ€å¯èƒ½æ‡¸æ›å…«è™Ÿä¿¡è™Ÿæ—¥å­ï¼š${impact.strongSignalDay}</li>
<li>å°æˆ¶å¤–æ´»å‹•èˆ‡èˆªç­å½±éŸ¿ï¼š${impact.suggestion}</li>
`;

// æ´»å‹•å»ºè­°åŠŸèƒ½
function suggestActivity() {
const input = document.getElementById("activityInput").value;
const risky = /è¡Œå±±|ä¹˜èˆ¹|éœ²ç‡Ÿ|å¤–å‡º|æ´»å‹•/;
const day = input.includes("18") ? "ä¸ƒæœˆåå…«æ—¥" : "è©²æ—¥";
const result = risky.test(input) ?
`âš ï¸ AIé æ¸¬${day}æœŸé–“é¢¨å‹¢è¼ƒå¤§ï¼Œå»ºè­°ä½ å»¶æœŸæˆ–æ”¹è®Šæ´»å‹•å®‰æ’ã€‚` :
`âœ… AIé æ¸¬${day}é¢¨å‹¢å°šå¯ï¼Œæ´»å‹•å¯å¦‚å¸¸é€²è¡Œã€‚`;
document.getElementById("activityResult").textContent = result;
}

// ç²µèªï¼è‹±æ–‡èªéŸ³
function speak(lang) {
const msg = new SpeechSynthesisUtterance();
msg.lang = lang === 'zh' ? 'zh-HK' : 'en-US';
msg.text = aiData.voiceText?.[lang] || "æœªæœ‰é æ¸¬è³‡æ–™ã€‚";
speechSynthesis.speak(msg);
}

// å¤©æ–‡å°è­¦å‘Šï¼ˆè‡ªå‹•è¼‰å…¥ï¼‰
fetch("https://data.weather.gov.hk/weatherAPI/opendata/weather.php?dataType=warnsum&lang=tc")
.then(res => res.json())
.then(data => {
const txt = data?.details || "ç¾æ™‚æ²’æœ‰å¤©æ°£è­¦å‘Šã€‚";
document.getElementById("hkoWarning").textContent = `âš ï¸ ç¾æ™‚è­¦å‘Šï¼š${txt}`;
});
</script>
</body>
</html>