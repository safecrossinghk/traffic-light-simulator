<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<title>æ¸¯éµäººæµé æ¸¬ Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body { font-family: sans-serif; padding: 30px; background: #f9f9f9; }
h1 { color: #333; }
#alert {
color: red;
font-weight: bold;
font-size: 1.5em;
margin-top: 20px;
}
</style>
</head>
<body>
<h1>ğŸš‡ æ¸¯éµç«™äººæµé æ¸¬ Dashboard</h1>
<canvas id="flowChart" width="600" height="300"></canvas>
<div id="alert"></div>

<script>
// æ¨¡æ“¬è³‡æ–™ï¼ˆå¯ç”¨å¾Œç«¯ API æä¾›å‹•æ…‹æ•¸æ“šï¼‰
const peopleHistory = [280, 320, 410, 480, 510, 600]; // éå»æ•¸æ“š
const predicted = 650; // LSTM é æ¸¬çµæœ
const threshold = 500;

// åˆå§‹åŒ–åœ–è¡¨
const ctx = document.getElementById('flowChart').getContext('2d');
const flowChart = new Chart(ctx, {
type: 'line',
data: {
labels: ['-25min', '-20', '-15', '-10', '-5', 'Now'],
datasets: [{
label: 'æ¯ 5 åˆ†é˜å…¥ç«™äººæ•¸',
data: peopleHistory,
borderColor: 'blue',
fill: false,
tension: 0.3
}, {
label: 'é æ¸¬ï¼ˆ+5 åˆ†é˜ï¼‰',
data: [...Array(5).fill(null), predicted],
borderColor: 'red',
borderDash: [5, 5],
fill: false,
pointRadius: 6
}]
}
});

// èªéŸ³æ’­å ±åŠŸèƒ½ï¼ˆåªåœ¨é æ¸¬äººæ•¸éå¤šæ™‚è§¸ç™¼ï¼‰
function speak(text) {
if ('speechSynthesis' in window) {
const msg = new SpeechSynthesisUtterance(text);
msg.lang = 'zh-HK'; // å»£æ±è©± / ç²µèªèªç³»ï¼ˆå¦‚æœªæ”¯æ´æœƒ fallback æ™®é€šè©±ï¼‰
window.speechSynthesis.cancel(); // åœæ­¢ä¹‹å‰çš„æ’­å ±
window.speechSynthesis.speak(msg);
} else {
console.log("âš ï¸ æ­¤ç€è¦½å™¨ä¸æ”¯æ´èªéŸ³æ’­æ”¾åŠŸèƒ½ã€‚");
}
}

// é¡¯ç¤ºè­¦å‘Šä¸¦æ’­èªéŸ³
if (predicted > threshold) {
const warning = `âš ï¸ é æ¸¬äººæµç‚º ${predicted} äººï¼Œè«‹ä¹˜å®¢åˆ†æµä½¿ç”¨å…¶ä»–å‡ºå£ã€‚`;
document.getElementById('alert').innerText = warning;
speak(warning);
}
</script>
</body>
</html>