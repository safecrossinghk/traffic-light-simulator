<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="UTF-8">
  <title>æŒ‡å®šåœ°é»äººæµæƒ…æ³</title>
</head>
<body>
  <h2>ğŸ“ æŒ‡å®šåœ°é»äººæµæƒ…æ³</h2>
  <div id="results"></div>

  <script>
    const locations = [
      { name: 'é¦™æ¸¯åœ‹éš›æ©Ÿå ´', lat: 22.3080, lng: 113.9185 },
      { name: 'é«˜éµè¥¿ä¹é¾ç«™', lat: 22.3042, lng: 114.1594 },
      { name: 'ç¾…æ¹–å£å²¸', lat: 22.5336, lng: 114.1136 },
      { name: 'ç¦ç”°å£å²¸', lat: 22.5155, lng: 114.0685 },
      { name: 'è“®å¡˜å£å²¸', lat: 22.5566, lng: 114.1515 },
      { name: 'æ·±åœ³ç£å£å²¸', lat: 22.5017, lng: 113.9278 },
      { name: 'æ¸¯ç æ¾³å¤§æ©‹å£å²¸', lat: 22.3040, lng: 113.9430 },
      { name: 'çš‡å´—å£å²¸', lat: 22.5212, lng: 114.0714 }
    ];

    const apiKey = "MWE3NWNmMzFjZWNiNGMxMDlhNGNhNDFjNTY3ZjZkMTB8NzY5ZGY0MGQ0Zg"; // ğŸ›  è«‹æ›¿æ›ç‚ºä½ çš„ Outscraper API é‡‘é‘°

    async function fetchPopularity(location) {
      const encoded = encodeURIComponent(`${location.lat},${location.lng}`);
      const url = `https://api.app.outscraper.com/maps/search-v2?query=${encoded}&limit=1`;

      try {
        const response = await fetch(url, {
          headers: { "X-API-KEY": apiKey }
        });
        const data = await response.json();
        const place = data[0];

        const popularity = place?.popular_times?.[new Date().getDay()]?.data?.[new Date().getHours()];
        return popularity !== undefined ? `${location.name}ï¼šç›®å‰äººæµ ${popularity}ï¼ˆä¼°è¨ˆï¼‰` : `${location.name}ï¼šåƒ…æä¾›æ­·å²äººæµè³‡æ–™`;
      } catch (e) {
        return `${location.name}ï¼šè³‡æ–™ç²å–å¤±æ•—`;
      }
    }

    (async () => {
      const results = document.getElementById('results');
      for (let loc of locations) {
        const info = await fetchPopularity(loc);
        const p = document.createElement('p');
        p.textContent = info;
        results.appendChild(p);
      }
    })();
  </script>
</body>
</html>