<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>Outscraper å³æ™‚äººæµè³‡æ–™æ¸¬è©¦ï¼ˆåŠ å¼·éŒ¯èª¤è™•ç†ï¼‰</title>
</head>
<body>
<h2>Outscraper å³æ™‚äººæµè³‡æ–™æ¸¬è©¦</h2>
<button onclick="getCrowd()">ç«‹å³æŸ¥è©¢æœ—è±ªåŠäººæµ</button>
<pre id="result">å°šæœªæŸ¥è©¢</pre>

<script>
async function getCrowd() {
const apiKey = 'MWE3NWNmMzFjZWNiNGMxMDlhNGNhNDFjNTY3ZjZkMTB8NzY5ZGY0MGQ0Zg';
const query = 'Langham Place, Mong Kok, Hong Kong'; // ğŸ” è«‹å‹¿ä½¿ç”¨ä¸­æ–‡
const url = `https://api.app.outscraper.com/maps/search-v2?q=${encodeURIComponent(query)}&limit=1&async=false`;

document.getElementById('result').textContent = 'æŸ¥è©¢ä¸­...';

try {
const response = await fetch(url, {
method: 'GET',
headers: {
'X-API-KEY': apiKey,
'Accept': 'application/json'
}
});

if (!response.ok) {
const errorText = await response.text();
throw new Error(`HTTPéŒ¯èª¤ ${response.status}: ${errorText}`);
}

let data;
try {
data = await response.json();
} catch (jsonError) {
throw new Error('è§£æå›å‚³è³‡æ–™å¤±æ•—ï¼Œå¯èƒ½ä¸æ˜¯æœ‰æ•ˆçš„ JSONã€‚');
}

if (data.error) {
throw new Error(`APIéŒ¯èª¤: ${data.errorMessage || 'æœªçŸ¥éŒ¯èª¤'}`);
}

if (data?.data?.length > 0) {
const place = data.data[0];
const popularity = place.current_popularity !== undefined
? `å³æ™‚äººæµæŒ‡æ•¸ï¼š${place.current_popularity}`
: 'âš ï¸ ç„¡å³æ™‚äººæµè³‡æ–™ï¼ˆåƒ…æ­·å²ï¼‰';
document.getElementById('result').textContent = `åœ°é»ï¼š${place.title}\n${popularity}`;
} else {
document.getElementById('result').textContent = 'âš ï¸ æ‰¾ä¸åˆ°åœ°é»è³‡æ–™';
}
} catch (error) {
console.error('éŒ¯èª¤ï¼š', error);
document.getElementById('result').textContent = `âš ï¸ ç™¼ç”ŸéŒ¯èª¤ï¼š${error.message}`;
}
}
</script>
</body>
</html>
