<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8" />
<title>AIé¢¨æš´æ¶ˆæ¯</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
body { font-family: "Helvetica", sans-serif; background: #f9f9f9; margin: 20px; }
h1 { color: #0066cc; }
.box { background: white; padding: 15px; margin-bottom: 20px; border-radius: 10px; box-shadow: 0 0 5px #ccc; }
.warn { background: #ffefc6; padding: 10px; border-left: 5px solid orange; margin-bottom: 10px; }
#map { height: 400px; }
</style>
</head>
<body>
<h1>ğŸŒªï¸ AIé¢¨æš´æ¶ˆæ¯</h1>
<div class="box">
<p>ç‰ˆæœ¬ï¼š<span id="latestTime">è¼‰å…¥ä¸­...</span></p>
<div class="warn"><strong>âš ï¸ ç¾æ™‚è­¦å‘Šï¼š</strong><span id="warningText">è¼‰å…¥ä¸­...</span></div>
</div>

<div class="box">
<h2>ğŸ—ºï¸ AI é æ¸¬è·¯å¾‘åœ–</h2>
<div id="map"></div>
<p style="font-size: 12px; color: gray;">æœ¬åœ–é¡¯ç¤ºç”± <strong>GLO-TCTrack</strong> æ¨¡å‹é æ¸¬çš„é¢¨æš´ç§»å‹•è·¯å¾‘ï¼ˆæœ€æ–°ä¸€æ¬¡æ›´æ–°ï¼‰ã€‚</p>
</div>

<div class="box">
<h2>ğŸŒ¬ï¸ é¢¨çƒæ‡¸æ›æ©Ÿç‡</h2>
<ul id="windProb"></ul>
</div>

<div class="box">
<h2>ğŸ“† ä¸‰æ—¥å…§å½±éŸ¿æ™‚æ®µ</h2>
<p><strong>æœ€æ¥è¿‘é¦™æ¸¯æ™‚æ®µï¼š</strong><span id="closestTime"></span></p>
<p><strong>æœ€å¯èƒ½æ‡¸æ›ä¸‰è™Ÿï¼å…«è™Ÿä¿¡è™Ÿï¼š</strong><span id="likelySignalDay"></span></p>
<p><strong>é¢¨éšªæç¤ºï¼š</strong><span id="riskComment"></span></p>
</div>

<div class="box">
<h2>ğŸ§­ æ´»å‹•å»ºè­°</h2>
<ul id="activityList"></ul>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
// ğŸ‘‡ æ¨¡æ“¬ aiDataï¼ˆæ—¥å¾Œæ¯æ—¥æ›´æ–°é€™è£¡ï¼‰
const aiData = { /* â† è²¼ä¸Šå‰›æ‰ JSON å…§å®¹ */ };

// é¡¯ç¤ºç‰ˆæœ¬
document.getElementById("latestTime").textContent = aiData.latestTime;
document.getElementById("warningText").textContent = aiData.hkoWarning.status;

// åœ°åœ–åˆå§‹åŒ–
const map = L.map('map').setView([18, 122], 5);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
attribution: '&copy; OpenStreetMap'
}).addTo(map);

const latlngs = aiData.path.map(p => [p.lat, p.lng]);
L.polyline(latlngs, { color: 'red' }).addTo(map);

// æ¯å€‹ç¯€é»éƒ½åŠ  marker
aiData.path.forEach((p, i) => {
const label = i === aiData.path.length - 1 ? "æœ€æ–°ä½ç½®" : `é æ¸¬é» ${i + 1}`;
L.circleMarker([p.lat, p.lng], {
radius: 5,
color: i === aiData.path.length - 1 ? 'blue' : 'gray'
}).addTo(map).bindPopup(`${label}<br>${p.time}`);
});

// æ‡¸æ›é¢¨çƒæ©Ÿç‡
aiData.hkWindBallProb.forEach(d => {
const item = document.createElement("li");
item.textContent = `${d.day}ï¼šä¸‰è™Ÿé¢¨çƒæ©Ÿç‡ ${d.signal3}%ã€å…«è™Ÿé¢¨çƒ ${d.signal8}%`;
document.getElementById("windProb").appendChild(item);
});

// æ´»å‹•å»ºè­°
aiData.activitySuggestions.forEach(a => {
const li = document.createElement("li");
li.innerHTML = `<strong>${a.activity}</strong>ï¼š${a.advice}`;
document.getElementById("activityList").appendChild(li);
});

// é¢¨æš´å½±éŸ¿é æ¸¬
document.getElementById("closestTime").textContent = aiData.impactForecast.closestTime;
document.getElementById("likelySignalDay").textContent = aiData.impactForecast.likelySignalDay;
document.getElementById("riskComment").textContent = aiData.impactForecast.riskComment;
</script>
</body>
</html>